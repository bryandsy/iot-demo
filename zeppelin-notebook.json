{"paragraphs":[{"title":"Load data into temporary table","text":"val df = sqlContext\n  .read\n  .format(\"org.apache.spark.sql.cassandra\")\n  .options(Map( \"table\" -> \"tweets\", \"keyspace\" -> \"twitter\" ))\n  .load()\n\ndf.registerTempTable(\"tweets\")","authenticationInfo":{},"dateUpdated":"Apr 19, 2016 10:42:01 PM","config":{"colWidth":12,"editorMode":"ace/mode/scala","graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1461100482886_676814265","id":"20160419-190505_301538565","dateCreated":"Apr 19, 2016 9:14:42 PM","dateStarted":"Apr 19, 2016 10:42:01 PM","dateFinished":"Apr 19, 2016 10:42:01 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:161","errorMessage":""},{"title":"Count of tweets by query","text":"%sql\nSELECT\n  query,\n  count(1) AS count\nFROM tweets\nGROUP BY query\nORDER BY count DESC","authenticationInfo":{},"dateUpdated":"Apr 19, 2016 10:43:04 PM","config":{"colWidth":6,"editorMode":"ace/mode/sql","graph":{"mode":"table","height":315,"optionOpen":false,"keys":[{"name":"query","index":0,"aggr":"sum"}],"values":[{"name":"count","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"query","index":0,"aggr":"sum"},"yAxis":{"name":"count","index":1,"aggr":"sum"}}},"enabled":true,"tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1461100482888_674505772","id":"20160419-190850_710945234","dateCreated":"Apr 19, 2016 9:14:42 PM","dateStarted":"Apr 19, 2016 10:42:01 PM","dateFinished":"Apr 19, 2016 10:42:06 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:162","errorMessage":"","focus":true},{"title":"Count of tweets, broken down by score and query","text":"%sql\nSELECT\n  count(1) AS tweet_count,\n  query,\n  CASE score WHEN 0 THEN 'negative' ELSE 'positive' END AS sentiment\nFROM tweets\nGROUP BY score, query\nORDER BY query DESC, score ASC","authenticationInfo":{},"dateUpdated":"Apr 19, 2016 10:42:56 PM","config":{"colWidth":6,"editorMode":"ace/mode/sql","graph":{"mode":"table","height":300,"optionOpen":true,"keys":[{"name":"tweet_count","index":0,"aggr":"sum"}],"values":[{"name":"query","index":1,"aggr":"sum"}],"groups":[],"scatter":{"size":{"name":"tweet_count","index":0,"aggr":"sum"},"group":{"name":"query","index":1,"aggr":"sum"},"xAxis":{"name":"tweet_count","index":0,"aggr":"sum"},"yAxis":{"name":"query","index":1,"aggr":"sum"}}},"enabled":true,"tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1461100482889_674121023","id":"20160419-191113_1835542856","dateCreated":"Apr 19, 2016 9:14:42 PM","dateStarted":"Apr 19, 2016 10:42:02 PM","dateFinished":"Apr 19, 2016 10:42:10 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:163","errorMessage":"","focus":true},{"title":"Count of tweets by language","text":"%sql\nSELECT\n  get_json_object(tweet, \"$.lang\") AS lang,\n  count(1) AS count\nFROM tweets\nWHERE get_json_object(tweet, \"$.lang\") != 'und'\nGROUP BY get_json_object(tweet, \"$.lang\")\nORDER BY count DESC\nLIMIT 10","authenticationInfo":{},"dateUpdated":"Apr 19, 2016 10:43:19 PM","config":{"colWidth":6,"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"keys":[{"name":"lang","index":0,"aggr":"sum"}],"values":[{"name":"count","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"lang","index":0,"aggr":"sum"}}},"enabled":true,"editorMode":"ace/mode/sql","tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1461100579866_-851839087","id":"20160419-211619_830527664","dateCreated":"Apr 19, 2016 9:16:19 PM","dateStarted":"Apr 19, 2016 10:42:06 PM","dateFinished":"Apr 19, 2016 10:42:14 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:164","errorMessage":""},{"title":"Count of tweets by location","text":"%sql\nSELECT\n  get_json_object(tweet, '$.user.location') AS location,\n  count(1) AS tweet_count\nFROM tweets\nWHERE\n  get_json_object(tweet, '$.user.location') IS NOT NULL AND\n  length(get_json_object(tweet, '$.user.location')) > 0\nGROUP BY get_json_object(tweet, '$.user.location')\nORDER BY tweet_count DESC\nLIMIT 15","authenticationInfo":{},"dateUpdated":"Apr 19, 2016 10:43:36 PM","config":{"colWidth":6,"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"keys":[{"name":"location","index":0,"aggr":"sum"}],"values":[{"name":"tweet_count","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"location","index":0,"aggr":"sum"},"yAxis":{"name":"tweet_count","index":1,"aggr":"sum"}}},"enabled":true,"editorMode":"ace/mode/sql","tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1461102117293_-1540921078","id":"20160419-214157_1591459698","dateCreated":"Apr 19, 2016 9:41:57 PM","dateStarted":"Apr 19, 2016 10:42:14 PM","dateFinished":"Apr 19, 2016 10:42:22 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:2339","errorMessage":""},{"title":"Selection of most recently processed tweets","text":"%sql\nSELECT\n  substr(tweet_text, 40) AS tweet_text,\n  get_json_object(tweet, '$.user.screen_name') AS screen_name,\n  score,\n  from_utc_timestamp(from_unixtime(batchtime / 1000), 'PST') AS batchtime\nFROM tweets\nORDER BY batchtime DESC\nLIMIT 20","authenticationInfo":{},"dateUpdated":"Apr 19, 2016 10:43:24 PM","config":{"colWidth":6,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"tweet_text","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"tweet_text","index":0,"aggr":"sum"}}},"enabled":true,"editorMode":"ace/mode/sql","tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1461100944240_1817301950","id":"20160419-212224_1379126866","dateCreated":"Apr 19, 2016 9:22:24 PM","dateStarted":"Apr 19, 2016 10:42:11 PM","dateFinished":"Apr 19, 2016 10:42:17 PM","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:165"},{"title":"Count of tweets by user","text":"%sql\nSELECT\n  get_json_object(tweet, '$.user.screen_name') AS screen_name,\n  count(*) AS tweet_count\nFROM tweets\nWHERE\n  get_json_object(tweet, '$.user.screen_name') IS NOT NULL AND\n  length(get_json_object(tweet, '$.user.screen_name')) > 0\nGROUP BY get_json_object(tweet, '$.user.screen_name')\nORDER BY tweet_count DESC\nLIMIT 10\n","authenticationInfo":{},"dateUpdated":"Apr 19, 2016 10:43:50 PM","config":{"colWidth":6,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"screen_name","index":0,"aggr":"sum"}],"values":[{"name":"tweet_count","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"screen_name","index":0,"aggr":"sum"},"yAxis":{"name":"tweet_count","index":1,"aggr":"sum"}}},"enabled":true,"tableHide":false,"title":true,"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1461102511182_-984005530","id":"20160419-214831_656892158","dateCreated":"Apr 19, 2016 9:48:31 PM","dateStarted":"Apr 19, 2016 10:42:18 PM","dateFinished":"Apr 19, 2016 10:42:26 PM","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:167"},{"title":"Breakdown of tweet score by hour","text":"%sql\nSELECT\n  hour(from_utc_timestamp(from_unixtime(get_json_object(tweet, '$.timestamp_ms') / 1000), 'PST')) AS hour,\n  score,\n  count(1) AS count\nFROM tweets\nGROUP BY score, hour(from_utc_timestamp(from_unixtime(get_json_object(tweet, '$.timestamp_ms') / 1000), 'PST')) \nORDER BY hour","authenticationInfo":{},"dateUpdated":"Apr 19, 2016 10:43:57 PM","config":{"colWidth":6,"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"keys":[{"name":"hour","index":0,"aggr":"sum"}],"values":[{"name":"count","index":2,"aggr":"sum"}],"groups":[{"name":"score","index":1,"aggr":"sum"}],"scatter":{"xAxis":{"name":"hour","index":0,"aggr":"sum"},"group":{"name":"score","index":1,"aggr":"sum"},"yAxis":{"name":"count","index":2,"aggr":"sum"}}},"enabled":true,"tableHide":false,"title":true,"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1461102735676_-707093067","id":"20160419-215215_4870451","dateCreated":"Apr 19, 2016 9:52:15 PM","dateStarted":"Apr 19, 2016 10:42:22 PM","dateFinished":"Apr 19, 2016 10:42:31 PM","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:168"},{"title":"Volume of tweets over time","text":"%sql\nSELECT\n  to_date(from_unixtime(get_json_object(tweet, '$.timestamp_ms') / 1000)) AS date,\n  count(1) as count,\n  CASE score WHEN 0 THEN 'negative' ELSE 'positive' END AS sentiment\nFROM tweets\nGROUP BY to_date(from_unixtime(get_json_object(tweet, '$.timestamp_ms') / 1000)), score\nORDER BY date","authenticationInfo":{},"dateUpdated":"Apr 19, 2016 10:44:11 PM","config":{"colWidth":6,"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"keys":[{"name":"date","index":0,"aggr":"sum"}],"values":[{"name":"count","index":1,"aggr":"sum"}],"groups":[{"name":"sentiment","index":2,"aggr":"sum"}],"scatter":{"xAxis":{"name":"date","index":0,"aggr":"sum"},"yAxis":{"name":"count","index":1,"aggr":"sum"}}},"enabled":true,"tableHide":false,"title":true,"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1461102997626_1391695214","id":"20160419-215637_749682774","dateCreated":"Apr 19, 2016 9:56:37 PM","dateStarted":"Apr 19, 2016 10:42:26 PM","dateFinished":"Apr 19, 2016 10:42:35 PM","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:169","focus":true},{"authenticationInfo":{},"dateUpdated":"Apr 19, 2016 10:42:01 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1461104033437_-902494603","id":"20160419-221353_1063371313","dateCreated":"Apr 19, 2016 10:13:53 PM","dateStarted":"Apr 19, 2016 10:42:31 PM","dateFinished":"Apr 19, 2016 10:42:35 PM","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:170"}],"name":"IoT demo","id":"2BHC68A8C","angularObjects":{"2BKJWF9EY":[],"2BJ49GXXE":[],"2BGSYFJK4":[],"2BKC6YWFU":[],"2BKRNMFTY":[],"2BHY5SEM3":[],"2BG42FZAK":[],"2BGDJVUJF":[],"2BH93E5XC":[],"2BGZMZWH6":[],"2BH9ZZV69":[],"2BH5VRRFV":[],"2BK37MPKP":[],"2BH5K669Z":[],"2BHDN687V":[],"2BG9ER3W3":[],"2BHWXDFG1":[],"2BHCDAN1K":[]},"config":{"looknfeel":"default","releaseresource":true,"cron":"0 0 0/1 * * ?"},"info":{}}