id: "/presto/shell"
acceptedResourceRoles:
  - "slave_public"
ports:
  - 80
requirePorts: true
dependencies:
  - "/presto/coordinator"
uris:
  - "https://github.com/yudai/gotty/releases/download/v0.0.12/gotty_linux_amd64.tar.gz"
args:
  - "-c"
  - >
    $MESOS_SANDBOX/gotty
    --title-format "presto twitter shell"
    --permit-write
    --port $PORT
    /usr/local/bin/presto
    --server coordinator-presto.marathon.mesos:12000
    --catalog cassandra
    --schema twitter
mem: 512
cpus: 1
env:
  TERM: xterm
upgradeStrategy:
  minimumHealthCapacity: 0
  maximumOverCapacity: 0
container:
  type: DOCKER
  docker:
    image: !cfg_str "mesosphere/presto-cli:{{presto_version}}"
    network: HOST
    parameters:
      - key: entrypoint
        value: "/bin/bash"
