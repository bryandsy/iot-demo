id:  /demo/tweet-consumer
cmd: !cfg_str /opt/spark/dist/bin/spark-submit
  --master mesos://leader.mesos:5050
  --executor-memory 4g
  --conf spark.mesos.coarse=true
  --conf spark.cores.max=10
  --conf spark.ui.port=$PORT0
  --conf spark.mesos.executor.docker.image=mesosphere/iot-demo:{{tweet_consumer_version}}
  --packages org.apache.spark:spark-streaming-kafka-assembly_2.10:1.4.1
  --class com.bythebay.pipeline.spark.streaming.StreamingRatings /streaming-assembly-1.0.jar
env:
  TWEET_CONSUMER_KAFKA_BROKERS: "broker-0.kafka.mesos:1025,broker-1.kafka.mesos:1025,broker-2.kafka.mesos:1025"
  TWEET_CONSUMER_KAFKA_TOPIC: "dem-tweets"
  TWEET_CONSUMER_CASSANDRA_SEEDS: "cassandra-dcos-node.cassandra.dcos.mesos"
  TWEET_CONSUMER_CASSANDRA_KEYSPACE: "twitter"
container:
  type: "DOCKER"
  docker:
    image: !cfg_str "mesosphere/iot-demo:{{tweet_consumer_version}}"
    forcePullImage: true
cpus: 0.5
mem: 2048
instances: 1
ports: [0]
healthChecks:
  -
    "portIndex": 0
    "protocol": "HTTP"
    "path": "/"
    "gracePeriodSeconds": 15
    "intervalSeconds": 60
    "timeoutSeconds": 10
    "maxConsecutiveFailures": 3
